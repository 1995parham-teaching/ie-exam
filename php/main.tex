\documentclass[../main.tex]{subfiles}

\begin{document}

\قسمت{شمارگر درخواست}

\پاراگراف{}
شما می‌خواهید که یک برنامه با زبان \متن‌لاتین{PHP} توسعه دهید و آن را به صورت \متن‌لاتین{embed} روی \متن‌لاتین{nginx} اجرا کنید.
مستقل از زبان برنامه‌نویسی و تنها با توجه به ماهیت \متن‌لاتین{embed} بودن این برنامه بر سرور \متن‌لاتین{HTTP}، آیا استفاده از یک متغیر ساده برای شمارش درخواست‌ها
که برای هر درخواست مقدار آن یک واحد زیاد می‌شود منطقی است؟ یا نیاز به استفاده از فایل یا یک حافظه مشترک داریم؟
\متن‌سیاه{راهنمایی.} برای پاسخ به این سوال در نظر داشته باشید که درخواست‌ها در صورت استفاده از روش \متن‌لاتین{embed} یا \متن‌لاتین{Server-Side Scripting}
در \متن‌لاتین{Thread}هایی به صورت موازی پردازش می‌شوند.

\پاراگراف{}
۱ نمره

\begin{answer}

مشکل استفاده از یک متغیر به تنهایی، این است که اگر این متغیر به صورت \متن‌لاتین{Shared} برای هم تردها باشد \متن‌لاتین{Race Condition} رخ می‌دهد.
یعنی ممکن است تردها به دلیل \متن‌لاتین{Preempt} شدن درون این متغیر داده اشتباه بریزند.
پس باید از مکانیزم های Lock در کنار این متغیر استفاده کرد. همچنین میتوان از \متن‌لاتین{Message Broker} استفاده کرد.
اما اگر هر ترد به صورت جداگانه متغیر را داشته باشد در این صورت شمارش تمام درخواست ها امکان ندارد، چون مشترک نیست.
همچنین استفاده از منبع مشترکی مانند فایل علاوه بر مشترک بودن و داشتن \متن‌لاتین{Race Condition} این مشکل را نیز دارد که سربار بسیار زیادی دارد.
پس بهتر است از یک متغیر ساده به همراه مکانیزم \متن‌لاتین{Lock} یا مثلاً \متن‌لاتین{Semaphore} استفاده کرد.

\end{answer}


\end{document}
