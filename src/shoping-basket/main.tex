\قسمت{پیاده‌سازی سرویس نگهداری از سبد خرید}

\زیرقسمت{مقدمه}
در این پروژه قصد داریم سرویس نگهداری از سبد خرید را پیاده‌سازی کنیم. در بسیاری از اوقات شما در یک سایت خرید
اینترنتی اقلام مختلفی را به سبد خود اضافه می‌کنید و خرید را نهایی می‌کنید یا ممکن است سبد را رها کرده و روزهای دیگری
به آن برگردید. این پروژه در واقع یک نسخه بسیار ساده شده از این فرآیند را پیاده‌سازی می‌کند.

\زیرقسمت{رابط کاربری برنامه‌نویسی}

این سرویس \متن‌لاتین{API}های زیر را ارائه می‌کند:


\begin{latin}
  \begin{itemize}
    \item \verb|GET /basket/| (returns a list of baskets)
    \item \verb|POST /basket/| (creates a new basket)
    \item \verb|PATCH /basket/<id>| (updates the given basket)
    \item \verb|GET /basket/<id>| (reutrns the given basket)
    \item \verb|DELETE /basket/<id>| (deletes the given backset)
  \end{itemize}
\end{latin}

تیم فرانت به صورت دوره‌ای وضعیت سبد خرید هر کاربر با استفاده از \متن‌لاتین{API}های \متن‌لاتین{POST} و \متن‌لاتین{PATCH} ایجاد و به روزرسانی می‌کند.
برای سادگی فرض می‌کنیم تنها یک کاربر در سیستم داریم (چرا که پیاده‌سازی بحث احراز هویت را در کلاس انجام نداده‌ایم، پس نیازی به پیاده‌سازی آن در آزمون میان‌ترم هم نیست).


\زیرقسمت{سبد خرید}

سبد خرید شامل اطلاعات زیر است:

\begin{latin}
  \begin{itemize}
    \item \verb|id|
    \item \verb|created_at| (the time in which basket is created)
    \item \verb|updated_at| (the time in which basket got updated)
    \item \verb|data| (variable length data with maximum size of 2048 bytes)
    \item \verb|state| (which shoule COMPLETED or PENDING)
  \end{itemize}
\end{latin}

\زیرقسمت{پیاده‌سازی}

تیم فرانت می‌تواند یک سبد ایجاد کرده و \متن‌لاتین{id} آن را دریافت کند.
در ادامه با استفاده از \متن‌لاتین{id} می‌تواند آن را به روزرسانی کند.
در نظر داشته باشیم وضعیت سبد در زمان از سمت تیم فرانت مشخص می‌شود و در به روزرسانی‌ها تغییر می‌کند اما با رسیدن سبد به وضعیت \متن‌لاتین{COMPLETED} دیگر امکان تغییر آن وجود ندارد.
به بیان دیگر، لحظه‌ای که تیم فرانت وضعیت سبد را به \متن‌لاتین{COMPLETED} می‌رساند، دیگر امکان تغییر در آن سبد وجود ندارد و باید خطای مناسب نمایش داده شود.

برای پیاده‌سازی دیتابیس می‌توانید مثل آنچه در کلاس انجام دادیم، از \متن‌لاتین{SQLite} استفاده کنید.
پیاده‌سازی \متن‌سیاه{باید} با زبان \متن‌لاتین{Go} صورت بپذیرد اما در انتخاب کتابخانه‌ها و چهارچوب‌ها هیچ محدودیتی ندارید.

در نظر داشته باشید در ساخت سبد و به روزرسانی آن تنها مقدار \متن‌لاتین{data} و \متن‌لاتین{state} قابل تعیین است و سایر مقادیر حتی در صورت داده شدن
تاثیری نداشته و در سمت بکند مقداردهی می‌شوند. تنها درخواست‌های ساخت و به روزرسانی دارای بدنه\پانویس{body} هستند.

\زیرقسمت{امتیازی}

در نظر داشته باشید هر دو مورد امتیازی بزرگ هستند و نمره زیادی خواهند داشت اما چون از مباحث کلاس خارج هستند به صورت امتیازی در آمده‌اند.
حتی انجام یکی از آن‌ها میتواند کمک شایانی به سایر نمرات شما در این در داشته باشد.

\زیرزیرقسمت{اضافه کردن کاربر}

برای این امر نیاز است که:

\شروع{فقرات}
\فقره اضافه کردن جدول کاربران
\فقره اضافه کردن کاربر به جدول سبد خرید و ایجاد ارتباط با جدول کاربران
\فقره اضافه کردن احراز هویت با استفاده از \متن‌لاتین{JWT} و تشخیص صاحب سبد خرید با استفاده از توکن دریافتی
\پایان{فقرات}

با اضافه شدن کاربر، هر کاربر تنها میتواند سبد خریدهای خود را لیست کرده و دریافت کند.
از سوی دیگر هر کاربر فقط میتواند برای خود سبد خرید ساخته و سبد خریدهای خود را به روزرسانی کند.

\زیرزیرقسمت{تغییر داده به یک \متن‌لاتین{JSON} دلخواه}

برای اینکار نیاز دارید از پایگاه داده‌ای مانند \متن‌لاتین{Postgres} استفاده کنید
که اجازه ذخیره کردن \متن‌لاتین{JSON} را به شما می‌دهد و از سوی دیگر نیاز دارید
مستندات \متن‌لاتین{GORM} را هم برای خواندن و نوشتن \متن‌لاتین{JSON} بررسی کنید.
